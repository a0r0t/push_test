PostgreSQLにバックアップの開始・終了を通知する関数はpg_start_backup()とpg_stop_backup()


pg_start_backup()はチェックポイントの実行も行う
チェックポイントは、データの変更をディスクに反映する処理
(※PostgreSQLでは、データの変更時にディスク上のデータを更新せず、共有メモリ上の共有バッファという領域
に読み込んだデータを更新する。その後、共有バッファの内容をまとめてディスク上のデータファイルへ書き込むチェックポイントという処理を行うことで、更新時のパフォーマンスを向上させている)

pg_start_backup()のチェックポイント実行によって、リカバリ時に適用するべきWAL(ログ先行書き込み: write ahead logging)の情報が記録される


通知関数を使用したバックアップの所得は、以下
1.	SELECT文でpg_start_backup()関数を呼び出す
		SELECT pg_start_backup('ラベル名');

2.	データベースクラスタ全体の物理バックアップを所得する

3.	SELECT文でpg_stop_backup()関数を呼び出す
		SELECT pg_stop_backup();
		
		
createuserコマンド
	PostgreSQLの新しいユーザアカウントを定義する
	
	-P	--pwprompt
	
		
SQLは、大きく分けて
	DDL	データ定義言語
	DML	データ操作言語
	DCL	データ制御言語
	
	
	DDL
		データ定義言語
		Data Definition Language
		データ構造や関係の定義に関するもの
		テーブルに対する制御など
		
		CREATE
		DROP
		ALTER
		TRUNCATE
		
		
	DML
		データ操作言語
		Data Manipulation Language
		データの操作に関するもの
		
		SELECT
		INSERT
		UPDATE
		DELETE
		
	DCL
		データ制御言語
		Data Control Language
		システムの管理や制御に関するもの
		
		GRANT	権限	データに対するアクセス権限の付与
		REVOKE	権限	アクセス権限の取り消し
		BEGIN	トランザクション
		COMMIT
		ROLLBACK
		
		
		
情報スキーマ
	データベースクラスタに関する情報の確認に使用する仕組み
	
	データベースオブジェクトに関する定義情報を含むスキーマを指す(テーブルなどのオブジェクトを格納している名前空間)
	
	スーパーユーザに所有される、ビューとテーブルのグループであり、SQLの標準規格に当てはまるために移植性が高い
	
	参照に特別な設定や権限は不要
	
	
	
	

データベース内のオブジェクトに関する情報を管理しているものには、システムカタログと情報スキーマがある


システムカタログ
	システムカタログとは内部的な情報を格納するテーブルやビュー
	
情報スキーマ
	
	
	
	
外部キー制約
	参照テーブルに存在しない値を格納させない制約
	外部キー制約を設定すると、参照先のテーブルとデータの整合性を担保することができる
	参照整合成約
	
	外部キーとなるカラムには主キー制約かユニーク制約が設定されている必要がある
	ユニーク制約であればNULLも可
	
	REFERENCES
	FOREIGN KEY
	を使用する
	
PostgreSQLでのバックアップ

	PostgreSQLには、物理バックアップと論理バックアップがある
	
	物理バックアップ
		オフラインでtarやrsyncコマンドによるディレクトリコピーを行う方法や
		オンラインでpg_basebackupコマンドを使用する方法などがある
		
		データベース情報を保存したデータファイルを直接使用するバックアップ方法
			→PostgreSQLのメジャーバージョンが異なる場合はリストアできない
			
	論理バックアップ
		pg_dump、pg_dumpallコマンドを使用する
		データん込みを所得するため、PostgreSQLのメジャーバージョンが異なる場合でもリストアできる
		
		